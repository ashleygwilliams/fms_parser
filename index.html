<!DOCTYPE html>
<html>
<head>
    <title>U.S. Treasury API</title>
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:800,400,300", rel="stylesheet", type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="web/js/jquery.formalize.min.js"></script>
    <script type='text/javascript' src="http://twitter.github.com/bootstrap/1.4.0/bootstrap-scrollspy.js"></script>
    <script type='text/javascript' src="http://demos.flesler.com/jquery/scrollTo/js/jquery.scrollTo-min.js"></script>
<<<<<<< HEAD
    <script>
      //change size of canvas first load
      function resizeCanvas(){
        var con = $("#container-fluid"),
        canvas = $("#canvas")[0],
        width = con.width(),
        aspect = 300/canvas.width;

        
        canvas.width = width;
        canvas.height = Math.round(width * aspect);
      }
      window.onresize = resizeCanvas;
      window.onload = resizeCanvas;
      //change size of canvas on window resize
    $(window).load(function(){
        var con = $("#container-fluid"),
        canvas = $("#canvas")[0],
        width = con.width(),
        aspect = 300/canvas.width;

        
        canvas.width = width;
        canvas.height = Math.round(width * aspect);
      $(function() {
        $('#navmenu').scrollSpy()
        
        $('#navmenu ul li a').bind('click', function(e) {
          e.preventDefault();
          target = this.hash;
          console.log(target);
          $.scrollTo(target, 1000, {offset:-140});
        });
      });
      $(function(){ // document ready
 
        var stickyTop = $('.sticky').offset().top; // returns number
 
        $(window).scroll(function(){ // scroll event
 
          var windowTop = $(window).scrollTop(); // returns number
 
        if (stickyTop < windowTop - 30) {
          $('.sticky').css({ position: 'fixed', top: 0 });
          $('#title').addClass('bluedots');
        }
        else {
          $('.sticky').css({ position: 'absolute', top: 80 });
          $('#title').removeClass('bluedots');
        }
        if (stickyTop < windowTop - 120) {
          $('nav').fadeIn('slow');
        }
        else {
          $('nav').fadeOut('slow');
        }
  });
 
});
    });
    </script>
=======
>>>>>>> b23f7a2f75efdae9ed554d0a7f629a14e9a39a53
    <!-- RED QUERY -->
    <script src="web/RedQueryBuilder/RedQueryBuilder.nocache.js" type="text/javascript" language="javascript">//</script>
    <link href="web/RedQueryBuilder/gwt/dark/dark.css" rel="stylesheet" type="text/css" />
    <script src="web/RedQueryBuilder/RedQueryBuilderFactory.nocache.js" type="text/javascript" language="javascript">//</script>
    <!-- end red query -->
    <link href="web/css/reset.css" rel='stylesheet' type='text/css'/>
    <link href="web/css/styles.css" rel='stylesheet' type='text/css'/>
</head>
<body class="bluedots" data-spy="scroll" data-target="#navmenu" data-offset="80">
  <!--[if lt IE 9]>
      <p class="chromeframe" style="margin: 40px auto 0; width: 600px; font-size: 24px; line-height: 1.4em;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->
    <div id="container-fluid">
        <div id="hero">
            <h1 id="title" class="sticky">TREASURY.IO</h1>
            <div id="subhead">A daily data feed for the U.S. Treasury</div>
        </div>
        <nav id="navmenu">
            <ul id="menu">
                <li class="nav-item btn" id="logo"><a href="#hero"><img src="web/images/flag.png"></a></li>
                <li class="nav-item btn active"><a href="#query">Query</a></li>
                <li class="nav-item btn"><a href="#about">About</a></li>
                <li class="nav-item btn"><a href="#tables">Tables</a></li>
                <li class="nav-item btn"><a href="#usage">Usage</a></li>
                <li class="nav-item btn"><a href="#examples">Examples</a></li>
            <ul>
        </nav>
        <div id="section-wrapper">
          <div id="query" class="section">
            <h2><a href="query"><span class="bullet">$</span> <span class="internal-link">Query builder</span></a></h2>
            <div id="builder">
              <div id="rqb">&nbsp;</div>
              <div id="query-string-wrapper">
                <fieldset>
                  <span>SQL Query</span>
                  <code id="query-string">
                    <textarea id="sql">Select from the dropdown menu above...</textarea>
                  </code>
                </fieldset>
              </div>
            <div class="btn-group">
              <a class="btn" id="download-csv" target="_blank" href="#">Download .csv</a>
              <a class="btn" id="download-json" target="_blank" href="#">View JSON</a>
            </div>
      </div>
      </div>
          <div class="section" id="about">
              <h2><a href="#about"><span class="bullet">$</span> <span class="internal-link">About</span></a></h2>
              <p>Retro synth direct trade, helvetica godard tumblr selvage keffiyeh vegan 8-bit iphone shoreditch. Fanny pack viral lo-fi polaroid, <a href="" target="_blank">odd future marfa</a> life chillwave. Fanny pack echo park cardigan street art. Pitchfork occupy cray semiotics. Pickled +1 single-origin coffee, polaroid marfa  authentic carles tumblr bicycle rights photo booth. Shoreditch irony 8-bit, swag jean shorts PBR quinoa high life beard lo-fi trust fund cosby sweater. Squid mcsweeneys small batch ennui banh mi.</p>
          </div>
          <div class="section" id="tables">
            <h2><a href="#tables"><span class="bullet">$</span> <span class="internal-link">Tables</span></a></h2>
            <p>This API provides eight tables. You can access them with the short names in parantheses</p>
            <ul class="tables">
              <li>I. Operating Cash Balance (<a class="">t1</a>)</li>
              <li>II. Deposits (<a class="">t2a</a>) and Withdrawals (<a class="">2b</a>)</li>
              <li>IIIa. Public Debt Transactions (<a class="">t3a</a>)</li>
              <li>IIIb. Adjustment of Public Dept Transactions to Cash Basis (<a class="">t3b</a>)</li>
              <li>IIIc. Debt Subject to Limit (<a class="">t3c</a>)</li>
              <li>IV. Federal Tax Deposits (<a class="">t4</a>)</li>
              <li>V. Short-term Cash Investments (<a class="">t5</a>)</li>
              <li>VI. Incom Tax Refunds Issued (<a class="">t6</a>)</li>
            </ul>
          </div>
          <div class="section" id="usage">
              <h2><a href="#usage"><span class="bullet">$</span> <span class="internal-link">Usage</span></a></h2>
              <p>The eight tables are stored in one SQLite database. Query it from a URL like this,</p>
              <pre><code>https://box.scraperwiki.com/cc7znvq/47d80ae900e04f2/sql/?q=:sql</code></pre>
              <p>where <code>:sql</code> is a URL-encoded SQL command. For example, you can see the database schema like so.</p>
              <pre><a target="_blank" href='https://box.scraperwiki.com/cc7znvq/47d80ae900e04f2/sql/?q=SELECT%20"name","sql"%20FROM%20sqlite_master'><code>https://box.scraperwiki.com/cc7znvq/47d80ae900e04f2/sql/?q=SELECT%20"name","sql"%20FROM%20sqlite_master</code></a></pre>
          </div>
          <div class="section" id="examples">
              <h2><a href="#examples"><span class="bullet">$</span> <span class="internal-link">Examples</span></a></h2>
              <p>Billions upon billions brain is the seed of intelligence hundreds of thousands ship of the imagination trillion! How far away, cosmic fugue Drake Equation extraordinary claims require extraordinary evidence from which we spring white dwarf, Jean-Fran√ßois Champollion?</p>
              <ul>
                <li>
                  <h3>Python</h3>
                  <pre><code>from json import load
from urllib import urlopen
from urllib import urlencode

from pandas import DataFrame

def treasury(sql):
    'Query treasury.io, and return the results as a pandas data frame.'
    url = 'https://box.scraperwiki.com/cc7znvq/47d80ae900e04f2/sql/'
    query_string = urlencode({'q':sql})
    handle = urlopen(url + '?' + query_string)
    if handle.code == 200:
        d = load(handle)
        return DataFrame(d)
    else:
        raise ValueError(handle.read())

if __name__ == '__main__':
    print 'Operating cash balances for May 22, 2013'
    print treasury('''SELECT * FROM "t1" WHERE "date" = '2013-05-22';''')</code></pre>
                </li>
              </ul>
          </div>
        </div>
    </div>
    <footer>
      <p>Made lovingly by <a href="http://csvsoundsystem.com" target="_blank" class="highlight">csv soundsystem</a> in fulfillment of a Code Sprint grant from <a href="http://www.mozillaopennews.org/" target="_blank"  class="highlight">knight-mozilla OpenNews</a>.</p><p><a href="http://dansinker.com/post/49856260511/opennews-code-sprints-do-some-spring-cleaning-on-data" target="_blank">I want to know more</a>.</p>
    </footer>
        <script>
          $(function() {
            $('#navmenu').scrollSpy()

            $('#navmenu ul li a').on('click', function(e) {
                var that = this;
                scrollThere(that, e);
            });

            $('h2 a').on('click', function(e) {
                var that = this;
                scrollThere(that, e);
            });

            function scrollThere(that, e){
              e.preventDefault();
              target = that.hash;
              console.log(that.hash);
              $.scrollTo(target, 300, {offset:-10});
            }
          });
        </script>
        <script>
RedQueryBuilderFactory.create({
    meta : {
        tables : [ {
            "name" : "Operating Cash Balance",
            "columns" : [ {
                "name" : "ACCOUNT",
                "label" : "account",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "DATE",
                "label" : "date",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "TOTAL",
                "label" : "total",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "CLOSING TODAY",
                "label" : "closing_today",
                "type" : "STRING",
                "size" : 10
            }],
            fks : []
        },
        {
            "name" : "Deposits",
            "columns" : [ {
                "name" : "ACCOUNT",
                "label" : "account",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "DATE",
                "label" : "date",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "TOTAL",
                "label" : "total",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "CLOSING TODAY",
                "label" : "closing_today",
                "type" : "STRING",
                "size" : 10
            }],
            fks : []
        },
        {
            "name" : "Withdrawals",
            "columns" : [ {
                "name" : "ACCOUNT",
                "label" : "account",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "DATE",
                "label" : "date",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "TOTAL",
                "label" : "total",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "CLOSING TODAY",
                "label" : "closing_today",
                "type" : "STRING",
                "size" : 10
            }],
            fks : []
        },
        {
            "name" : "Public Debt Transactions",
            "columns" : [ {
                "name" : "ACCOUNT",
                "label" : "account",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "DATE",
                "label" : "date",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "TOTAL",
                "label" : "total",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "CLOSING TODAY",
                "label" : "closing_today",
                "type" : "STRING",
                "size" : 10
            }],
            fks : []
        },
        {
            "name" : "Adjustment of Public Debt Transactions to Cash Balance",
            "columns" : [ {
                "name" : "ACCOUNT",
                "label" : "account",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "DATE",
                "label" : "date",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "TOTAL",
                "label" : "total",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "CLOSING TODAY",
                "label" : "closing_today",
                "type" : "STRING",
                "size" : 10
            }],
            fks : []
        },{
            "name" : "Debt Subject to Limit",
            "columns" : [ {
                "name" : "ACCOUNT",
                "label" : "account",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "DATE",
                "label" : "date",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "TOTAL",
                "label" : "total",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "CLOSING TODAY",
                "label" : "closing_today",
                "type" : "STRING",
                "size" : 10
            }],
            fks : []
        },{
            "name" : "Federal Tax Deposits",
            "columns" : [ {
                "name" : "ACCOUNT",
                "label" : "account",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "DATE",
                "label" : "date",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "TOTAL",
                "label" : "total",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "CLOSING TODAY",
                "label" : "closing_today",
                "type" : "STRING",
                "size" : 10
            }],
            fks : []
        },{
            "name" : "Short-term Cash Investments",
            "columns" : [ {
                "name" : "ACCOUNT",
                "label" : "account",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "DATE",
                "label" : "date",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "TOTAL",
                "label" : "total",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "CLOSING TODAY",
                "label" : "closing_today",
                "type" : "STRING",
                "size" : 10
            }],
            fks : []
        },{
            "name" : "Income Tax Refunds Issued",
            "columns" : [ {
                "name" : "ACCOUNT",
                "label" : "account",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "DATE",
                "label" : "date",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "TOTAL",
                "label" : "total",
                "type" : "STRING",
                "size" : 10
            },{
                "name" : "CLOSING TODAY",
                "label" : "closing_today",
                "type" : "STRING",
                "size" : 10
            }],
            fks : []
        } ],
        types : [ {
            "name" : "STRING",
            "editor" : "TEXT",
            "operators" : [ {
                "name" : "=",
                "label" : "is",
                "cardinality" : "ONE"
            }]
        }]
    },
    onSqlChange : function(sql, args) {
    var out = sql + '\r\n';
    for (var i = 0; i < args.length; i++) {
      var arg = args[i];
      out += 'arg' + i;
      if (arg != null) {
        out += ' type=' + Object.prototype.toString.call(arg) + ' toString=' + arg;
      } else {
        out += ' null';
      }
      out += '\r\n';
    }
    something = function(out) { return out.replace(/\"x0\"\.?/g, ''); }
    query = function(out) { return 'https://box.scraperwiki.com/cc7znvq/47d80ae900e04f2/sql/?q=' + encodeURI(something(out)); }
    document.getElementById("sql").value = something(out);
    document.getElementById("download-csv").setAttribute('href', query(out));
    document.getElementById("download-json").setAttribute('href', query(out));
  },
});
        </script>
</body>
</html>
